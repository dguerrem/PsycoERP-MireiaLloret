<div>
  <!-- Label with conditional required asterisk -->
  <label [for]="controlName" class="block text-sm font-medium text-gray-700 mb-2">
    {{ label }}
    @if (required) {
      <span class="text-red-500">*</span>
    }
  </label>

  <!-- Select field -->
  @if (type === 'select') {
    <select
      [id]="controlName"
      [formControlName]="controlName"
      (change)="onFieldChange($event)"
      class="block w-full h-10 px-3 py-2 text-sm border border-gray-300 rounded-lg bg-white hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 appearance-none"
      [class.border-red-500]="hasError"
      [class.focus:ring-red-500]="hasError"
      [class.focus:border-red-500]="hasError"
      style="background-image: url('data:image/svg+xml;charset=US-ASCII,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 4 5%22><path fill=%22%23666%22 d=%22M2 0L0 2h4zm0 5L0 3h4z%22/></svg>'); background-repeat: no-repeat; background-position: right 12px center; background-size: 12px; padding-right: 40px;">
      <option value="">{{ selectPlaceholder }}</option>
      @for (option of options; track option.value) {
        <option [value]="option.value">{{ option.label }}</option>
      }
    </select>
  } @else {
    <!-- Input field with dynamic styling based on validation state -->
    <input
      [id]="controlName"
      [type]="type"
      [placeholder]="placeholder"
      [formControlName]="controlName"
      [min]="min"
      [max]="max"
      (change)="onFieldChange($event)"
      class="block w-full h-10 px-3 py-2 text-sm border border-gray-300 rounded-lg bg-white placeholder:text-gray-400 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200"
      [class.border-red-500]="hasError"
      [class.focus:ring-red-500]="hasError"
      [class.focus:border-red-500]="hasError">
  }

  <!-- Error message display -->
  @if (hasError) {
    <p class="text-red-600 text-xs mt-2 flex items-center gap-1">
      <!-- Error icon -->
      <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
      </svg>
      {{ displayErrorMessage }}
    </p>
  }
</div>