<!-- Main container following project standards -->
<div class="p-4 sm:p-6 h-screen overflow-hidden">
  <div class="w-full h-full flex flex-col max-h-full">

    <!-- Header -->
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4 sm:mb-6">
      <div>
        <h1 class="text-2xl sm:text-3xl font-black font-montserrat text-gray-900">Gestión de Clínicas</h1>
        <p class="text-sm sm:text-base text-gray-600 mt-1 sm:mt-2">
          Administra las clínicas registradas en la plataforma
        </p>
      </div>

      <!-- Header buttons -->
      <div class="flex items-center gap-4">
        <button
          class="bg-primary hover:opacity-90 w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 text-white rounded-md transition-opacity font-medium"
          (click)="openCreateForm()">
          <svg class="h-4 w-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
          </svg>
          Nueva Clínica
        </button>
      </div>
    </div>

    <!-- Main content -->
    <div class="flex-1 overflow-y-auto min-h-0">
      <div class="h-full flex flex-col relative">
        <div class="flex-1 overflow-y-auto pb-20">
          <app-clinics-list [clinics]="clinicsList()" [trackByFn]="trackByClinicId" [isDeletedView]="false"
            (onEdit)="openEditForm($event)" (onDelete)="openDeleteModal($event)"
            (onRestore)="openRestoreModal($event)">
          </app-clinics-list>
        </div>

        <!-- Pagination -->
        @if (paginationData()) {
        <div class="absolute bottom-0 left-0 right-0">
          <app-pagination [currentPage]="paginationData()!.currentPage" [totalPages]="paginationData()!.totalPages"
            [totalRecords]="paginationData()!.totalRecords" [recordsPerPage]="paginationData()!.recordsPerPage"
            [hasNextPage]="paginationData()!.hasNextPage" [hasPrevPage]="paginationData()!.hasPrevPage"
            (onPageChange)="onPageChange($event)" (onPageSizeChange)="onPageSizeChange($event)">
          </app-pagination>
        </div>
        }
      </div>
    </div>
  </div>
</div>

<!-- Clinic Form Modal -->
<app-clinica-form [isOpen]="showForm()" [clinica]="editingClinica()" (onSave)="handleSave($event)"
  (onCancel)="closeForm()">
</app-clinica-form>

<!-- Delete Confirmation Modal -->
<app-confirmation-modal [isOpen]="deletingClinic() !== null" title="Confirmar Eliminación"
  message="¿Estás seguro de que deseas eliminar la clínica " [itemName]="deletingClinic()?.name" confirmText="Eliminar"
  cancelText="Cancelar" confirmButtonType="destructive" (onConfirm)="handleDeleteClinic()"
  (onCancel)="closeDeleteModal()">
</app-confirmation-modal>

<!-- Restore Confirmation Modal -->
<app-confirmation-modal [isOpen]="restoringClinic() !== null" title="Confirmar Restauración"
  message="¿Estás seguro de que deseas restaurar la clínica " [itemName]="restoringClinic()?.name"
  confirmText="Restaurar" cancelText="Cancelar" confirmButtonType="primary" (onConfirm)="handleRestoreClinic()"
  (onCancel)="closeRestoreModal()">
</app-confirmation-modal>
